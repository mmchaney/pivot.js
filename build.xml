<?xml version="1.0"?>
<project basedir="." default="all">
  <taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask" 
    classpath="lib/google_closure_compiler.jar"/>       
  <target name="all" depends="pivot, min"/>
  <target name="dev" depends="pivot, min, css"/>    
  <target name="pivot">
    <concat destfile="pivot.js">
      <fileset file="src/pivot.js"/>
      <fileset file="src/util.js"/>
      <fileset file="src/gallery.js"/>
      <fileset file="src/photo.js"/>
      <fileset file="src/flickr.js"/>
    </concat>
  </target>
  <target name="min">
    <jscomp compilationLevel="simple" warning="default" 
      debug="false" output="pivot.min.js">
      <sources dir="${basedir}">
        <file name="pivot.js"/>
      </sources>
    </jscomp>
  </target>
  <target name="css" description="CSSembed">
    <exec executable="java" output="pivot.css">
      <arg line="-jar lib/cssembed-0.3.3.jar pivot-no-embed.css"/>
    </exec>
  </target>
</project>